generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// 사용자 테이블 (auth, app_user)
model User {
  id                    Int      @id @default(autoincrement())
  user_phone            String   @unique @db.VarChar(11)
  user_type             String
  user_road_address     String?  
  user_detail_address   String?

  cart                  Cart?
  orders                Order[]
}

// 장바구니 테이블
model Cart {
  id           Int         @id @default(autoincrement())
  user         User        @relation(fields: [user_id], references: [id])
  user_id      Int         @unique
  cart_items   CartItem[]
}

// 장바구니 아이템 테이블
model CartItem {
  id            Int     @id @default(autoincrement())
  cart          Cart    @relation(fields: [cart_id], references: [id])
  cart_id       Int
  product_type  String
  item_count    Int
  item_options  Json
}

// 주문 테이블
model Order {
  order_id       String   @id @db.VarChar(12)
  user           User     @relation(fields: [user_id], references: [id])
  user_id        Int
  cart           Cart     @relation(fields: [cart_id], references: [id])
  cart_id        Int
  order_type     String
  recipient_phone String  @db.VarChar(11)
  order_price    Int
  order_options  Json
  created_at     DateTime @default(now())
}
